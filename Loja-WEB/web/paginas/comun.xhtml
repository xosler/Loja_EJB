<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <link href="./../resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="./../resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <link href="./../resources/css/loja.css" rel="stylesheet" type="text/css" />
        <link href="./../resources/css/css3buttons.css" rel="stylesheet" type="text/css" />
        <!--        <link href="http://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet" type="text/css" />-->
        <script language="text/javascript" src="./../resources/js/loja.js" type="text/javascript" />
        <!--        <script language="text/javascript" src="./../resources/js/jquery-1.6.1.min.js" type="text/javascript" /> jqueryUI da pau com ele.-->


        <title>SR-Malhas</title>

        <meta http-equiv="content-type"
              content="application/xhtml+xml; charset=utf-8"></meta>
        <meta http-equiv="content-language" content="pt-br"></meta>
        <meta name="author"
              content="Carlos Alexandro Becker, Alexandre Schossler, Rodrigo Baron" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <meta name="reply-to" content="" />
        <meta name="robots" content="index, follow" />
    </h:head>

    <h:body style="width: 98%; height: 100%; margin: auto;">

        <p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide(); Loja.configuraInicio();"/>  

        <p:dialog modal="true" widgetVar="statusDialog" header="Status"   
                  draggable="false" closable="false">  
            <p:graphicImage value="./../resources/images/ajaxloadingbar.gif" />  
        </p:dialog> 

        <header id="top">
            <hgroup>
                <h1>SR-Malhas</h1>
                <h3>Loja de Roupas</h3>
            </hgroup>
        </header>

        <div id="left">
            <nav>

                <h:form id="carrinho">
                    <p:growl id="mensagens" showDetail="true" sticky="false" autoUpdate="true" showSummary="true"
                             life="300" />
                    <h:outputText escape="false" value="&lt;h1&gt;Menu&lt;/h1&gt; &lt;hr /&gt;" />
                    <h:panelGrid columns="1">
                        <p:commandLink value="Início" oncomplete="document.location = 'index.xhtml';" />
                        <p:commandLink value="Buscar Produtos" action="#{managedProduto.buscar}" oncomplete="Loja.gotopagina(Loja.Paginas.LIS_PRODUTO);" />
                        <p:commandLink value="Novo Produto" action="#{managedProduto.novo}" oncomplete="Loja.gotopagina(Loja.Paginas.CAD_PRODUTO);" />

                        <p:commandLink value="Novo Categoria" action="#{managedCategoria.novo}" oncomplete="Loja.gotopagina(Loja.Paginas.CAD_CATEGORIA);" />
                        <p:commandLink value="Lista de categorias" action="#{managedProduto.novo}" oncomplete="Loja.gotopagina(Loja.Paginas.LIS_CATEGORIA);" />
                    </h:panelGrid>

                    <p:spacer height="20px" />

                    <h:outputText escape="false" value="&lt;h1&gt;Carrinho&lt;/h1&gt; &lt;hr /&gt;" />

                    <h:panelGroup rendered="#{empty managedCarrinho.carrinho.produtos}"  >
                        <h:outputText value="Você ainda não possui nenhum produto no seu carrinho." />
                        <p:commandLink value="Venha escolher alguns aqui!" action="#{managedProduto.buscar}" oncomplete="Loja.gotopagina(Loja.Paginas.LIS_PRODUTO);" />
                    </h:panelGroup>

                    <p:dataGrid var="produto" value="#{managedCarrinho.carrinho.produtos}" columns="1"  
                                rows="12" effect="true" rendered="#{not empty managedCarrinho.carrinho.produtos}"  
                                paginatorTemplate="{PreviousPageLink}{NextPageLink}">  

                        <p:column>  
                            <p:panel header="#{produto.nome}" style="text-align:center">  
                                <h:panelGrid columns="1" style="width:100%">  
                                    <h:link outcome="detalhesProduto.xhtml?produto=#{produto.id}">
                                        <p:graphicImage value="#{produto.imagem}" width="80px" height="80px" />         
                                    </h:link>
                                    <p:commandButton update=":carrinho" value="Remover" 
                                        action="#{managedCarrinho.removerDoCarrinho}" image="ui-icon ui-icon-trash" >  
                                        <f:setPropertyActionListener value="#{produto.id}" target="#{managedCarrinho.idProdutoSelecionado}" /> 
                                    </p:commandButton>  
                                </h:panelGrid>  
                            </p:panel>  
                        </p:column>  
                    </p:dataGrid>  
                    <h:outputText value="Total: " rendered="#{not empty managedCarrinho.carrinho.produtos}" />
                    <h:outputText styleClass="preco" value="R$ #{managedCarrinho.totalCarrinho}"
                                  rendered="#{not empty managedCarrinho.carrinho.produtos}"/>
                </h:form>
            </nav>
        </div>
        <div id="centro">
            <header>
                <hgroup style="margin-left: 10px;">
                    <h1> <ui:insert name="titulo">Titulo</ui:insert></h1>
                    <h3> <ui:insert name="subtitulo">Sub-titulo</ui:insert></h3>
                </hgroup>
                <hr />
            </header>
            <section>
                <article>
                    <ui:insert name="content">Content</ui:insert>
                </article>
            </section>
        </div>
        <div id="bottom">
            Desenvolvido por <a href="http://about.me/caarlos0">Carlos A Becker</a>, <a href="http://twitter.com/B4r0ns">Rodrigo Baron</a>, <a href="http://twitter.com/Xosler">Alexandre Schossler</a>. 
            <br />
            Copyright 2010, <a href="http://www.geekvigarista.com">http://www.geekvigarista.com</a>
        </div>
    </h:body>

</html>
